---
layout: publication
title: Fast Hashing With Strong Concentration Bounds
authors: Aamand Anders, Knudsen Jakob B. T., Knudsen Mathias B. T., Rasmussen Peter M. R., Thorup Mikkel
conference: "Arxiv"
year: 2019
bibkey: aamand2019fast
additional_links:
  - {name: "Paper", url: "https://arxiv.org/abs/1905.00369"}
tags: ['ARXIV']
---
Previous work on tabulation hashing by Patrascu and Thorup from STOC'11 on simple tabulation and from SODA'13 on twisted tabulation offered Chernoff-style concentration bounds on hash based sums, e.g., the number of balls/keys hashing to a given bin, but under some quite severe restrictions on the expected values of these sums. The basic idea in tabulation hashing is to view a key as consisting of \{&#37; raw &#37;\}\\(c=O(1)\\)\{&#37; endraw &#37;\} characters, e.g., a 64-bit key as \{&#37; raw &#37;\}\\(c=8\\)\{&#37; endraw &#37;\} characters of 8-bits. The character domain \{&#37; raw &#37;\}\\(\Sigma\\)\{&#37; endraw &#37;\} should be small enough that character tables of size \{&#37; raw &#37;\}\\(|\Sigma|\\)\{&#37; endraw &#37;\} fit in fast cache. The schemes then use \{&#37; raw &#37;\}\\(O(1)\\)\{&#37; endraw &#37;\} tables of this size, so the space of tabulation hashing is \{&#37; raw &#37;\}\\(O(|\Sigma|)\\)\{&#37; endraw &#37;\}. However, the concentration bounds by Patrascu and Thorup only apply if the expected sums are \{&#37; raw &#37;\}\\(\ll |\Sigma|\\)\{&#37; endraw &#37;\}. To see the problem, consider the very simple case where we use tabulation hashing to throw \{&#37; raw &#37;\}\\(n\\)\{&#37; endraw &#37;\} balls into \{&#37; raw &#37;\}\\(m\\)\{&#37; endraw &#37;\} bins and want to analyse the number of balls in a given bin. With their concentration bounds, we are fine if \{&#37; raw &#37;\}\\(n=m\\)\{&#37; endraw &#37;\}, for then the expected value is \{&#37; raw &#37;\}\\(1\\)\{&#37; endraw &#37;\}. However, if \{&#37; raw &#37;\}\\(m=2\\)\{&#37; endraw &#37;\}, as when tossing \{&#37; raw &#37;\}\\(n\\)\{&#37; endraw &#37;\} unbiased coins, the expected value \{&#37; raw &#37;\}\\(n/2\\)\{&#37; endraw &#37;\} is \{&#37; raw &#37;\}\\(\gg |\Sigma|\\)\{&#37; endraw &#37;\} for large data sets, e.g., data sets that do not fit in fast cache. To handle expectations that go beyond the limits of our small space, we need a much more advanced analysis of simple tabulation, plus a new tabulation technique that we call \emph\{tabulation-permutation\} hashing which is at most twice as slow as simple tabulation. No other hashing scheme of comparable speed offers similar Chernoff-style concentration bounds.
