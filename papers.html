---
layout: default
title: Search all Publications on Learning to Hash
description: A list of research papers for Learning to Hash.
---

<h2>Search Publications</h2>
<p>
  Search across all papers in this collection. Use the search bar to filter by <strong>title</strong> 
  and <strong>authors</strong>. Click a title to open the paper’s page. 
  <strong style="color:#c00000;">NEW</strong> marks papers ingested in the past week.
</p>

<!-- Loading Indicator -->
<div id="loading" aria-live="polite" role="status">
  <p>Loading Paper List…</p>
</div>

<!-- Search control -->
<div class="controls">
  <div class="search">
    <label for="globalSearch"><strong>Search</strong></label>
    <input id="globalSearch" type="search" placeholder="Search papers…" inputmode="search" />
    <button id="resetSearch" type="button">Clear</button>
  </div>
</div>

<div class="content-bound">
  <div class="table-wrap">
    <table id="allPapers" class="display stripe hover" style="width:100%;">
      <thead>
        <tr>
          <th>Year</th>
          <th>Title</th>
          <th>Authors</th>
          <th>Citations</th>
          <th style="display:none">All Authors</th>
        </tr>
      </thead>
      <tbody><!-- rows added via JS --></tbody>
    </table>
  </div>
</div>

<style>
  .badge-new {
    display: inline-block;
    margin-left: .5em;
    font-weight: 700;
    color: #c00000; /* red */
  }
</style>

<style>
  :root{
    --sidebar-width: 0px;
    --page-gutter: clamp(12px, 2vw, 24px);
  }
  .controls { display:flex; flex-wrap:wrap; align-items:flex-start; gap:.6rem; margin:.6rem 0 .9rem; }
  .search { display:flex; align-items:flex-start; gap:.6rem; flex-wrap:wrap; }
  .search label { font-weight:700; font-size:.85rem; }
  .search input[type="search"] {
    width: 260px; max-width: 100%;
    padding:.25rem .4rem; border:1px solid #aaa; border-radius:4px; font-size:.9rem; background-color:#f8f9fa;
  }
  .search input:focus { outline:none; border-color:#0c5fce; box-shadow:0 0 0 2px rgba(26,115,232,.25); }
  .search button { padding:.25rem .5rem; font-size:.85rem; border:1px solid #aaa; border-radius:4px; background:#f8f9fa; cursor:pointer; }
  .search button:hover { background:#e2e2e2; }

  .content-bound{
    width:100%;
    max-width: min(100%, calc(100vw - var(--sidebar-width) - var(--page-gutter)));
    box-sizing: border-box;
  }
  .table-wrap{ width:100%; overflow-x:auto; -webkit-overflow-scrolling: touch; }

  table#allPapers { width:100%; border-collapse: collapse; font-size: 0.95rem; table-layout: fixed; }
  @media (max-width: 768px){ table#allPapers { table-layout: auto; } }

  #allPapers th:nth-child(1), #allPapers td:nth-child(1) { width: 6ch; }  /* Year */
  #allPapers th:nth-child(4), #allPapers td:nth-child(4) { width: 8ch; }  /* Citations */
  #allPapers th:nth-child(2), #allPapers td:nth-child(2),
  #allPapers th:nth-child(3), #allPapers td:nth-child(3) { width: auto; }
  #allPapers thead th { white-space: normal; }
  #allPapers tbody td { white-space: normal; word-break: break-word; overflow-wrap: anywhere; }

  #allPapers td:nth-child(1), #allPapers th:nth-child(1),
  #allPapers td:nth-child(4), #allPapers th:nth-child(4) {
    text-align:right; font-variant-numeric: tabular-nums;
  }

  @media (max-width: 900px) { #allPapers { font-size: 0.9rem; } }
  @media (max-width: 600px) { #allPapers { font-size: 0.85rem; } }

  #loading {
    position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
    font-size: 1.05em; text-align: center; z-index: 10; background: white;
    padding: .8em 1.2em; border: 1px solid #ccc; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,.08);
  }
</style>

<!-- Self-hosted vendor assets -->
<script src="{{ '/assets/vendor/jquery-3.6.0.min.js' | relative_url }}" defer></script>
<link rel="stylesheet" href="{{ '/assets/vendor/datatables-1.13.6.min.css' | relative_url }}">
<script src="{{ '/assets/vendor/datatables-1.13.6.min.js' | relative_url }}" defer></script>
<link rel="stylesheet" href="{{ '/assets/vendor/dataTables.responsive-2.5.0.min.css' | relative_url }}">
<script src="{{ '/assets/vendor/dataTables.responsive-2.5.0.min.js' | relative_url }}" defer></script>

<!-- Page Logic -->
<script>
(function () {
  const loaderEl = document.getElementById('loading');
  const input = document.getElementById('globalSearch');
  const reset = document.getElementById('resetSearch');

  const PAGE_URL_PREFIX = '{{ site.baseurl }}' + '/publications/';
  const PAGE_URL_SUFFIX = '';

  function readHashQuery() {
    const raw = window.location.hash ? window.location.hash.slice(1) : '';
    if (!raw) return '';
    try { return decodeURIComponent(raw.replace(/\+/g, ' ')); } catch { return raw; }
  }
  function setHash(q) {
    if (q && q.trim().length) {
      history.replaceState(null, '', '#' + encodeURIComponent(q.trim()));
    } else {
      history.replaceState(null, '', location.pathname + location.search);
    }
  }

  async function loadJSONs() {
    const [papersRes, histRes] = await Promise.all([
      // keep history and papers fresh so NEW stays correct
      fetch('{{ site.baseurl }}/paper-abstracts.json', { cache: 'no-store' }),
      fetch('{{ site.baseurl }}/assets/paper-history.json', { cache: 'no-store' })
    ]);
    if (!papersRes.ok) throw new Error('Failed to load paper-abstracts.json');
    if (!histRes.ok) throw new Error('Failed to load paper-history.json');
    const [papers, history] = await Promise.all([papersRes.json(), histRes.json()]);
    return { papers, history };
  }

  function toNumber(x) {
    if (x === null || x === undefined) return 0;
    if (typeof x === 'number') return x;
    const n = String(x).replace(/,/g, '').match(/-?\d+(\.\d+)?/);
    return n ? Number(n[0]) : 0;
  }

  function hasDT() { return window.jQuery && jQuery.fn && jQuery.fn.dataTable; }

  function escapeHtml(s) {
    return String(s)
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/"/g, '&quot;')
      .replace(/'/g, '&#39;');
  }

  function ts(s) {
    if (!s) return 0;
    const d = new Date(s);
    return isNaN(d.getTime()) ? 0 : Math.floor(d.getTime() / 1000);
  }

  function buildTable(rows, history, initialQuery) {
    const now = Math.floor(Date.now() / 1000);
    const ONE_DAY = 24 * 3600;
    const SEVEN_DAYS = 7 * ONE_DAY;

    const items = history.items || {};
    const latestAdded = ts(history.latest_added); // optional: for debugging

    const data = rows.map(r => {
      const year = toNumber(r.year);
      const citations = toNumber(r.citations);

      const rawKey = r.key || '';
      const normKey = rawKey.toLowerCase().trim();

      const title = (r.title || '').trim();
      const short_authors = r.short_authors || (Array.isArray(r.authors)
        ? r.authors.slice(0, 3).join(', ') + (r.authors.length > 3 ? ' et al.' : '')
        : (r.authors || ''));
      const authors = Array.isArray(r.authors)
        ? r.authors.join(', ').trim()
        : (r.authors || '').trim();

      const url = (r.url && String(r.url)) ||
        (normKey ? (PAGE_URL_PREFIX + encodeURIComponent(normKey) + PAGE_URL_SUFFIX) : null);

      // Robust history key lookup
      const hItem = items[normKey] || items[rawKey] || items[(rawKey || '').trim()] || {};
      const firstAdded = ts(hItem.first_added);
      const added_ts = firstAdded || 0;

      // NEW if within last 7 days
      const isNew = !!firstAdded && (now - firstAdded) <= SEVEN_DAYS;

      const titleHtml = url ? `<a href="${url}">${escapeHtml(title)}</a>` : escapeHtml(title);
      const badge = isNew ? `<span class="badge-new" aria-label="Added in last 7 days">NEW</span>` : '';

      return {
        year,
        title_link: titleHtml + badge,
        short_authors,
        authors,
        citations,
        added_ts,
        is_new: isNew ? 1 : 0
      };
    });

    const isMobile = window.matchMedia('(max-width: 768px)').matches;
    const PAGE_LEN = isMobile ? 50 : 200;
    const LENGTH_MENU = isMobile ? [25, 50, 75, 100] : [25, 50, 100, 250, 1000, 2000];

    const dt = jQuery('#allPapers').DataTable({
      data,
      columns: [
        { data: 'year', title: 'Year' },
        { data: 'title_link', title: 'Title' },
        { data: 'short_authors', title: 'Authors' },
        { data: 'citations', title: 'Citations' },
        { data: 'authors', visible: false, searchable: true, title: 'All Authors' },
        { data: 'added_ts', visible: false }, // hidden first_added (epoch seconds)
        { data: 'is_new', visible: false }    // hidden NEW flag
      ],
      columnDefs: [
        { targets: 1, render: (data)=>data, orderable: true },
        { targets: [0,3], type: 'num', searchable: false },
        { targets: [1,2,4], searchable: true }
      ],
      paging: true,
      pageLength: PAGE_LEN,
      lengthMenu: LENGTH_MENU,
      searching: true,
      // Sort NEW first, then by addition recency, then by year, then by citations
      order: [[6, 'desc'], [5, 'desc'], [0, 'desc'], [3, 'desc']],
      autoWidth: true,
      deferRender: true,
      stateSave: !isMobile,
      scrollX: true,
      responsive: false,
      orderClasses: false,
      dom: 't<"bottom"ip>',
      initComplete: function () {
        const api = this.api();
        if (loaderEl) loaderEl.style.display = 'none';

        const debounce = (fn, ms = 120) => { let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a), ms); }; };

        const initial = typeof initialQuery === 'string' ? initialQuery : '';
        if (initial.length) {
          if (input) input.value = initial;
          api.search(initial).draw(false);
        }

        const applyFromInput = debounce(() => {
          const q = input ? input.value : '';
          api.search(q).draw(false);
          setHash(q);
        }, 120);

        if (input) {
          input.addEventListener('input', applyFromInput);
          input.addEventListener('keydown', e => { if (e.key === 'Enter') { e.preventDefault(); applyFromInput(); } });
        }

        if (reset) reset.addEventListener('click', () => {
          if (!input) return;
          input.value = '';
          api.search('').draw(false);
          setHash('');
          input.focus();
        });

        window.addEventListener('hashchange', () => {
          const q = readHashQuery();
          if (input) input.value = q;
          api.search(q).draw(false);
        });

        setTimeout(() => api.columns.adjust().draw(false), 60);
      }
    });

    const recalc = (() => { let t; return () => { clearTimeout(t); t=setTimeout(() => dt.columns.adjust(), 120); }; })();
    window.addEventListener('resize', recalc);
    window.addEventListener('orientationchange', recalc);

    // Dev aid:
    // if (!latestAdded) console.warn('history.latest_added missing or unparsable:', history.latest_added);
  }

  async function start() {
    try {
      if (!hasDT()) throw new Error('DataTables missing');
      const initialQuery = readHashQuery();
      if (input && initialQuery) input.value = initialQuery;
      const { papers, history } = await loadJSONs();
      buildTable(papers, history, initialQuery);
    } catch (err) {
      console.error(err);
      if (loaderEl) loaderEl.innerHTML = '<p>Sorry, failed to load papers.</p>';
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', start, { once: true });
  } else {
    start();
  }
})();
</script>
